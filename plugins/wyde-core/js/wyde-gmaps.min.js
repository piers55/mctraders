(function(e){function t(e){var t=google.maps.MapTypeId.ROADMAP;switch(e){case"1":t=google.maps.MapTypeId.HYBRID;break;case"3":t=google.maps.MapTypeId.SATELLITE;break;case"4":t=google.maps.MapTypeId.TERRAIN;break;default:t=google.maps.MapTypeId.ROADMAP;break}return t}e(".wyde-gmaps").each(function(){function s(){e(".wyde_gmaps_field",n).val(encodeURIComponent(JSON.stringify(i)))}var n=this;var r=e.parseJSON(decodeURIComponent(e(".wyde_gmaps_field",n).val()));var i=e.extend(true,{position:{lat:37.6,lng:-95.665},address:"",zoom:8,type:2},r);var o;if(i){o=new google.maps.LatLng(i.position.lat,i.position.lng);e(".map-address",n).val(i.address);e(".map-type",n).val(i.type);e(".map-zoom",n).val(i.zoom)}var u=t(i.type);var a=e(".gmaps-canvas",n).get(0);var f={zoom:i.zoom,center:o,mapTypeId:u};var l=new google.maps.Map(a,f);var c=new google.maps.Marker({position:o,title:"Drag & Drop marker",map:l,animation:google.maps.Animation.DROP,draggable:true});google.maps.event.addListener(c,"dragend",function(){o=c.getPosition();i.position={lat:o.lat(),lng:o.lng()};s()});e(".map-address",n).change(function(){var t=e(this).val();if(!t)return;i.address=t;s();var n=new google.maps.Geocoder;n.geocode({address:t},function(e,t){if(t===google.maps.GeocoderStatus.OK&&e.length>0&&e[0].geometry){var n=e[0].geometry.location;i.position={lat:n.lat(),lng:n.lng()};l.setCenter(n);c.setPosition(n)}else{}})});e(".map-type",n).change(function(){i.type=e(this).val();var n=t(i.type);l.setMapTypeId(n);s()});e(".map-zoom",n).change(function(){i.zoom=parseInt(e(this).val());l.setCenter(o);l.setZoom(i.zoom);s()})})})(jQuery)