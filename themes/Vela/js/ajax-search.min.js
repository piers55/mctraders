!function(e){"use strict";function t(t,o){var n=e(".autocomplete",o);n.length||a(o);var r={action:"ajax_search",search_keyword:e("input",o).val()};return 0==r.search_keyword.length?(n.hide().removeClass("open"),void e(".dropdown-menu, .search-more",n).html("")):(n.show().addClass("open"),e(".search-more",n).removeClass("selected").html('<p class="search-loading"><span class="post-loader"></span></p>'),void e.post(t,r,function(t){e(".dropdown-menu",n).html("");var a=e.parseJSON(t);a&&a.length>0&&(a.sort(function(e,t){var a=e.title,s=t.title;return s>a?-1:a>s?1:0}),e.each(a,function(){var t=e(String.format("<li><h5>{0}</h5></li>",this.title));t.append(s(this.name,this.items)),e(".dropdown-menu",n).append(t)})),0==a.length&&e(".search-more",n).addClass("selected"),e(".search-more",n).html(String.format('<a href="{0}/?s={1}">See more results for "{1}"</a>',wyde.page.siteURL,e("input",o).val())),"function"==typeof wyde.page.updateLink&&wyde.page.updateLink(e("li",n.not("#product-list"))),e(o).hasClass("active")&&(n.show().addClass("open"),e(".dropdown-menu",n).focus());var r=e(window).height()-e(".search-more",n).outerHeight()-e(".dropdown-menu",n).offset().top;e(".dropdown-menu",n).css("max-height",r)}))}function a(t){e('<div class="autocomplete"><ul class="dropdown-menu"></ul><div class="search-more"></div></div>').appendTo(".search-wrapper",t)}function s(t,a){var s=e("<ul></ul>").attr("id",String.format("{0}-list",t.toLowerCase()));return e.each(a,function(){var t="";this.post_image&&(t=String.format('<span class="thumb"><img src="{1}" alt="{2}"></span>',this.post_link,this.post_image,this.post_title));var a="";this.post_author&&(a=String.format('<span><i class="fa fa-pencil"></i>{0}</span>',this.post_author)),s.append(e(String.format('<li><a href="{1}">{0}<span><strong>{2}</strong><span class="post-meta">{3}<span><i class="fa fa-clock-o"></i>{4}</span></span></span></a></li>',t,this.post_link,this.post_title,a,this.post_date)))}),s}e.extend(wyde.page,{ajaxSearch:function(s){var o={delay:500,element:"#search"};return"undefined"!=typeof ajax_search_settings&&e.extend(o,ajax_search_settings),o=e.extend(!0,o,s),o.ajaxURL?e(o.element).each(function(){var s=null,n=this;a(n),e("input",n).attr("autocomplete","off"),e("input",n).keyup(function(e){"38"!=e.keyCode&&"40"!=e.keyCode&&"13"!=e.keyCode&&"27"!=e.keyCode&&"39"!=e.keyCode&&"37"!=e.keyCode&&(null!=s&&clearTimeout(s),s=setTimeout(function(){t(o.ajaxURL,n)},o.delay))})}):void 0}})}(jQuery);